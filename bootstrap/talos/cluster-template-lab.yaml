---
kind: Cluster
name: cluster1
talos:
  version: v1.11.2
kubernetes:
  version: 1.34.1
features:
  enableWorkloadProxy: true
  useEmbeddedDiscoveryService: true
  backupConfiguration:
    interval: 1h0m0s
patches:
  - name: cluster-base
    file: ./patches/100-cluster.yaml
  - name: cilium-install
    file: ./patches/00-cilium-install.yaml
---
kind: ControlPlane
name: controlplane
machineClass:
  name: cluster1-controlplane
  size: unlimited
patches:
  - name: controlplane-base
    file: ./patches/200-controlplane-dev.yaml
  - name: machine-certs
    file: ./patches/305-machine-certs.yaml
  - name: machine-hostdns
    file: ./patches/300-machine-hostdns.yaml
systemExtensions: [siderolabs/iscsi-tools, siderolabs/util-linux-tools]
---
kind: Workers
name: workers
machinesClass:
  - name: cluster1-worker
    size: unlimited
patches:
  - name: workers-base
    file: ./patches/250-workers-dev.yaml
  - name: machine-hostdns
    file: ./patches/300-machine-hostdns.yaml
