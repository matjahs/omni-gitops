---
kind: Cluster
name: cluster1
kubernetes:
  version: v1.34.1
talos:
  version: v1.11.2
patches:
  - file: patches/base/global/200-cluster1.yaml
  - file: patches/base/global/500-clilium.yaml
  - file: patches/base/global/500-host-entries.yaml
  - file: patches/base/global/500-kubespan.yaml
  - file: patches/base/global/500-longhorn.yaml
  - file: patches/base/global/500-rotate-certificates.yaml
systemExtensions:
  - siderolabs/iscsi-tools
  - siderolabs/util-linux-tools
  - siderolabs/vmtoolsd-guest-agent
#  - siderolabs/mdadm
features:
  useEmbeddedDiscoveryService: true
  backupConfiguration:
    interval: 1h0m0s
---
kind: ControlPlane
machines:
  - id: fa2e0642-9907-67b5-ce58-31ff711bbd9d
  - id: a11f0642-ee68-d79d-f469-1a478aa00af1
  - id: 40ea0642-7458-f24b-e51e-ece7d1828b7d
patches:
  - file: patches/base/controlplane/20-allow-scheduling-on-cp.yaml
#  - file: patches/base/controlplane/500-disable-admission-controller.yaml
---
kind: Workers
machineClass:
  name: cluster1-workers
  size: 3
patches: []
