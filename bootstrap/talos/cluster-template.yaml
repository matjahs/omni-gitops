---
kind: Cluster
name: cluster1
talos:
  version: v1.11.2
kubernetes:
  version: 1.34.1
features:
  enableWorkloadProxy: true
patches:
  - name: cni
    file: patches/cni.yaml
  - name: cilium
    file: patches/cilium.yaml
  - name: flux
    file: patches/flux.yaml
---
kind: ControlPlane
machineClass:
  name: cluster1-controlplane
  size: 3
patches:
  - name: cilium
    file: patches/cilium.yaml
  - name: flux
    file: patches/flux.yaml
  - name: monitoring
    file: patches/monitoring.yaml
  # - name: controlplane
  #   file: patches/controlplane.patch.yaml
---
kind: Workers
name: workers
machineClass:
  name: cluster1-workers
  size: unlimited
patches:
  - name: workers
    file: patches/workers.patch.yaml
# ---
# apiVersion: v1alpha1
# kind: UserVolumeConfig
# name: longhorn-volume
# provisioning:
  # diskSelector:
    # match: "!system_disk"
  # minSize: 100GB
  # maxSize: 200GB
