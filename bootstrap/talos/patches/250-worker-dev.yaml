---
machine:
  kubelet:
    extraMounts:
      - destination: /var/lib/longhorn
        type: bind
        source: /var/lib/longhorn
        options: [bind, rshared, rw]
  sysctls:
    vm.nr_hugepages: '1024'
  kernel:
    modules:
      - name: nvme_tcp
      - name: vfio_pci
    extraArgs:
      rotate-server-certificates: true
  install:
    extraKernelArgs: [net.ifnames]
  nodeLabels:
    topology.kubernetes.io/region: eu-west-1
    topology.kubernetes.io/zone: az1
cluster:
  coreDNS:
    disabled: true
  allowSchedulingOnControlPlanes: true
  extraManifests:
    - https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.2.1/standard-install.yaml
    - https://raw.githubusercontent.com/kubernetes-sigs/gateway-api/v1.2.1/config/crd/experimental/gateway.networking.k8s.io_tlsroutes.yaml
    - https://raw.githubusercontent.com/alex1989hu/kubelet-serving-cert-approver/main/deploy/standalone-install.yaml
    - https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
