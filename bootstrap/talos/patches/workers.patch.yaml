---
# JSON6902 style patch for worker nodes Longhorn support
# Adds required kernel modules and bind mount with rshared propagation.
- op: add
  path: /machine/kernel/modules/-
  value:
    name: iscsi_tcp
- op: add
  path: /machine/kernel/modules/-
  value:
    name: nbd
- op: add
  path: /machine/kubelet/extraMounts/-
  value:
    destination: /var/lib/longhorn
    type: bind
    source: /var/lib/longhorn
    options: [bind, rshared, rw]
